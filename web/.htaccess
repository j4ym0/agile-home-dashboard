RewriteEngine on

# Send api traffic to api.php
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.*)$ api.php?endpoint=$1 [L,QSA]

# If the requested file or directory exists, serve it directly
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
    
# Otherwise, redirect everything to index.php
RewriteRule ^(.*)$ index.php?endpoint=$1 [QSA,L]
